{"ast":null,"code":"import _toConsumableArray from\"C:/it-incubator/ignat-1/ignat-april1/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"C:/it-incubator/ignat-1/ignat-april1/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useRef,useState}from'react';import{message0}from'../HW1';import s from'./MessageSender.module.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var MessageSender=function MessageSender(props){var M=props.M;var textareaRef=useRef(null);var _useState=useState([]),_useState2=_slicedToArray(_useState,2),messages=_useState2[0],setMessages=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),text=_useState4[0],setText=_useState4[1];var onChange=function onChange(e){setText(e.currentTarget.value);};useEffect(function(){if(textareaRef!==null&&textareaRef!==void 0&&textareaRef.current){textareaRef.current.style.height='0px';textareaRef.current.style.height=textareaRef.current.scrollHeight+'px';}},[text]);var addMessage=function addMessage(){setMessages([].concat(_toConsumableArray(messages),[{id:messages.length?messages.length+1:1,user:message0.user,message:{text:text,time:new Date().toTimeString().slice(0,5)}}]));setTimeout(function(){return setText('');},4);};var onKeyDown=function onKeyDown(e){e.key==='Enter'&&e.shiftKey&&addMessage();};return/*#__PURE__*/_jsxs(_Fragment,{children:[messages.map(function(m){return/*#__PURE__*/_jsx(M,{message:m},'message'+m.id);}),/*#__PURE__*/_jsxs(\"div\",{id:'hw1-send-message-form',className:s.sendForm,children:[/*#__PURE__*/_jsx(\"textarea\",{id:'hw1-textarea',className:s.textarea,ref:textareaRef,title:'Shift+Enter for send',placeholder:'Type your message',value:text,onChange:onChange,onKeyDown:onKeyDown}),/*#__PURE__*/_jsx(\"button\",{id:'hw1-button',className:s.button,onClick:addMessage,children:\"Send\"})]})]});};export default MessageSender;","map":{"version":3,"names":["React","useEffect","useRef","useState","message0","s","MessageSender","props","M","textareaRef","messages","setMessages","text","setText","onChange","e","currentTarget","value","current","style","height","scrollHeight","addMessage","id","length","user","message","time","Date","toTimeString","slice","setTimeout","onKeyDown","key","shiftKey","map","m","sendForm","textarea","button"],"sources":["C:/it-incubator/ignat-1/ignat-april1/src/s2-homeworks/hw01/message-sender/MessageSender.tsx"],"sourcesContent":["import React, {useEffect, useRef, useState} from 'react'\nimport {message0} from '../HW1'\nimport s from './MessageSender.module.css'\n\nconst MessageSender = (props: any) => {\n    const M = props.M\n    const textareaRef = useRef<HTMLTextAreaElement | null>(null);\n    const [messages, setMessages] = useState<any[]>([])\n    const [text, setText] = useState<any>('')\n\n    const onChange = (e: any) => {\n        setText(e.currentTarget.value)\n    }\n\n    useEffect(() => {\n        if (textareaRef?.current) {\n            textareaRef.current.style.height = '0px'\n            textareaRef.current.style.height = textareaRef.current.scrollHeight + 'px'\n        }\n    }, [text])\n\n    const addMessage = () => {\n        setMessages([\n            ...messages,\n            {\n                id: messages.length ? messages.length + 1 : 1,\n                user: message0.user,\n                message: {\n                    text,\n                    time: new Date().toTimeString().slice(0, 5),\n                },\n            },\n        ])\n        setTimeout(() => setText(''), 4)\n    }\n\n    const onKeyDown = (e: any) => {\n        e.key === 'Enter' && e.shiftKey && addMessage()\n    }\n\n    return (\n        <>\n            {messages.map((m) => (\n                <M key={'message' + m.id} message={m}/>\n            ))}\n\n            <div id={'hw1-send-message-form'} className={s.sendForm}>\n                <textarea\n                    id={'hw1-textarea'}\n                    className={s.textarea}\n                    ref={textareaRef}\n\n                    title={'Shift+Enter for send'}\n                    placeholder={'Type your message'}\n                    value={text}\n\n                    onChange={onChange}\n                    onKeyDown={onKeyDown}\n                />\n                <button\n                    id={'hw1-button'}\n                    className={s.button}\n\n                    onClick={addMessage}\n                >\n                    Send\n                </button>\n            </div>\n        </>\n    )\n}\n\nexport default MessageSender"],"mappings":"4PAAA,MAAOA,MAAP,EAAeC,SAAf,CAA0BC,MAA1B,CAAkCC,QAAlC,KAAiD,OAAjD,CACA,OAAQC,QAAR,KAAuB,QAAvB,CACA,MAAOC,EAAP,KAAc,4BAAd,C,6IAEA,GAAMC,cAAa,CAAG,QAAhBA,cAAgB,CAACC,KAAD,CAAgB,CAClC,GAAMC,EAAC,CAAGD,KAAK,CAACC,CAAhB,CACA,GAAMC,YAAW,CAAGP,MAAM,CAA6B,IAA7B,CAA1B,CACA,cAAgCC,QAAQ,CAAQ,EAAR,CAAxC,wCAAOO,QAAP,eAAiBC,WAAjB,eACA,eAAwBR,QAAQ,CAAM,EAAN,CAAhC,yCAAOS,IAAP,eAAaC,OAAb,eAEA,GAAMC,SAAQ,CAAG,QAAXA,SAAW,CAACC,CAAD,CAAY,CACzBF,OAAO,CAACE,CAAC,CAACC,aAAF,CAAgBC,KAAjB,CAAP,CACH,CAFD,CAIAhB,SAAS,CAAC,UAAM,CACZ,GAAIQ,WAAJ,SAAIA,WAAJ,WAAIA,WAAW,CAAES,OAAjB,CAA0B,CACtBT,WAAW,CAACS,OAAZ,CAAoBC,KAApB,CAA0BC,MAA1B,CAAmC,KAAnC,CACAX,WAAW,CAACS,OAAZ,CAAoBC,KAApB,CAA0BC,MAA1B,CAAmCX,WAAW,CAACS,OAAZ,CAAoBG,YAApB,CAAmC,IAAtE,CACH,CACJ,CALQ,CAKN,CAACT,IAAD,CALM,CAAT,CAOA,GAAMU,WAAU,CAAG,QAAbA,WAAa,EAAM,CACrBX,WAAW,8BACJD,QADI,GAEP,CACIa,EAAE,CAAEb,QAAQ,CAACc,MAAT,CAAkBd,QAAQ,CAACc,MAAT,CAAkB,CAApC,CAAwC,CADhD,CAEIC,IAAI,CAAErB,QAAQ,CAACqB,IAFnB,CAGIC,OAAO,CAAE,CACLd,IAAI,CAAJA,IADK,CAELe,IAAI,CAAE,GAAIC,KAAJ,GAAWC,YAAX,GAA0BC,KAA1B,CAAgC,CAAhC,CAAmC,CAAnC,CAFD,CAHb,CAFO,GAAX,CAWAC,UAAU,CAAC,iBAAMlB,QAAO,CAAC,EAAD,CAAb,EAAD,CAAoB,CAApB,CAAV,CACH,CAbD,CAeA,GAAMmB,UAAS,CAAG,QAAZA,UAAY,CAACjB,CAAD,CAAY,CAC1BA,CAAC,CAACkB,GAAF,GAAU,OAAV,EAAqBlB,CAAC,CAACmB,QAAvB,EAAmCZ,UAAU,EAA7C,CACH,CAFD,CAIA,mBACI,2BACKZ,QAAQ,CAACyB,GAAT,CAAa,SAACC,CAAD,qBACV,KAAC,CAAD,EAA0B,OAAO,CAAEA,CAAnC,EAAQ,UAAYA,CAAC,CAACb,EAAtB,CADU,EAAb,CADL,cAKI,aAAK,EAAE,CAAE,uBAAT,CAAkC,SAAS,CAAElB,CAAC,CAACgC,QAA/C,wBACI,iBACI,EAAE,CAAE,cADR,CAEI,SAAS,CAAEhC,CAAC,CAACiC,QAFjB,CAGI,GAAG,CAAE7B,WAHT,CAKI,KAAK,CAAE,sBALX,CAMI,WAAW,CAAE,mBANjB,CAOI,KAAK,CAAEG,IAPX,CASI,QAAQ,CAAEE,QATd,CAUI,SAAS,CAAEkB,SAVf,EADJ,cAaI,eACI,EAAE,CAAE,YADR,CAEI,SAAS,CAAE3B,CAAC,CAACkC,MAFjB,CAII,OAAO,CAAEjB,UAJb,kBAbJ,GALJ,GADJ,CA8BH,CAlED,CAoEA,cAAehB,cAAf"},"metadata":{},"sourceType":"module"}